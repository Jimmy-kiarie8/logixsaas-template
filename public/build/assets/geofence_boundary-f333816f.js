import{m as r}from"./mapbox-gl-b26c6dbe.js";import{o as c,f as l,e as p,Q as d,a as s}from"./app-d02c39e6.js";import{_ as m}from"./_plugin-vue_export-helper-c27b6911.js";const y={data(){return{searchQuery:"",map:null,geofenceLayerId:"geofence-layer"}},mounted(){this.initializeMap()},methods:{initializeMap(){r.accessToken="pk.eyJ1IjoiamltbGFyYXZlbCIsImEiOiJjbDdydXA5djkwaXR2M3FwMmxwc2h3YjdqIn0.rgDAW_8AKT6dHtGHXX1DtQ",this.map=new r.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[36.828167203867835,-1.2918808498502665],zoom:8})},searchCity(){const t=`https://api.mapbox.com/geocoding/v5/mapbox.places/${this.searchQuery}.json?access_token=${r.accessToken}`;fetch(t).then(e=>e.json()).then(e=>{const o=e.features[0];o?(console.log("ðŸš€ ~ searchCity ~ place:",o),this.drawGeofence(o)):alert("City not found")})},drawGeofence(t){this.map.getLayer(this.geofenceLayerId)&&(this.map.removeLayer(this.geofenceLayerId),this.map.removeSource(this.geofenceLayerId)),this.map.addSource(this.geofenceLayerId,{type:"geojson",data:{type:"Feature",geometry:t.geometry}}),console.log("ðŸš€ ~ drawGeofence ~ place.geometry:",t.geometry),this.map.addLayer({id:this.geofenceLayerId,type:"fill",source:this.geofenceLayerId,paint:{"fill-color":"#f00","fill-opacity":.5}}),this.map.flyTo({center:t.center})}}},h=s("div",{id:"map",style:{height:"500px"}},null,-1);function f(t,e,o,g,i,n){return c(),l("div",null,[p(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>i.searchQuery=a),placeholder:"Search for a city"},null,512),[[d,i.searchQuery]]),s("button",{onClick:e[1]||(e[1]=(...a)=>n.searchCity&&n.searchCity(...a))},"Search"),h])}const b=m(y,[["render",f]]);export{b as default};
