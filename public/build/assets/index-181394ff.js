import{_ as T}from"./MainLayout-73462f0f.js";import U from"./create-211e35e6.js";import V from"./edit-176e17b8.js";import j from"./create-9d85ced5.js";import E from"./status-e50e8e1f.js";import z from"./assign-f2108735.js";import{W as N,k as i,o as h,c as p,w as e,a as d,b as t,h as l,t as y,D as u,g as B}from"./app-d02c39e6.js";import{_ as I}from"./_plugin-vue_export-helper-c27b6911.js";import"./FormComponent-85014e44.js";import"./index-8367094d.js";const L={props:{data:Object,form_data:Object,headers:Object,modelRoute:String,title:String,receiver_data:Object,sender_data:Object,payment_route:String,payment_data:Object},components:{MainLayout:T,myCreate:U,clientEdit:V,myPayment:j,myStatus:E,myAssign:z},data(){return{search:"",page:1,itemsPerPage:5,loading:!1}},methods:{goTo(o){this.loading=!0,N.visit(o)},openEdit(o){setTimeout(()=>{this.loading=!0},2e3),this.$refs.createModal.show(o)},openPayment(o){setTimeout(()=>{this.loading=!0},2e3),this.$refs.paymentModal.show(o)},statusUpdate(o){setTimeout(()=>{this.loading=!0},2e3),this.$refs.statusModal.show(o)},assignUpdate(o){setTimeout(()=>{this.loading=!0},2e3),this.$refs.assignModal.show(o)},getIcon(o){switch(o){case"Delivered":return"mdi-check-circle";case"Cancelled":return"mdi-cancel";case"Returned":return"mdi-undo";case"Scheduled":return"mdi-clock";case"Dispatched":return"mdi-send";default:return"mdi-information"}},getColor(o){switch(o){case"Delivered":return"success";case"Cancelled":return"error";case"Returned":return"error";case"Scheduled":return"info";case"Dispatched":return"warning";default:return""}},autoAssign(o){this.loading=!0,axios.post(`/drivers-auto-assign/${o}`,{}).then(f=>{this.loading=!1,console.log("ðŸš€ ~ axios.post ~ res:",f),this.sale_id=f.data.id}).catch(f=>{console.log("ðŸš€ ~ axios.post ~ error:",f),this.loading=!1})}},computed:{pageCount(){return Math.ceil(this.data.data.length/this.itemsPerPage)}}},W={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},q={class:"actions"},F=d("span",null,"Update",-1),G=d("span",null,"Delete",-1),H=d("span",null,"Print",-1),J=d("span",null,"Update Payment",-1),K=d("span",null,"Assign driver",-1),Q=d("span",null,"Map view",-1),X=d("span",null,"Assign driver",-1);function Y(o,f,s,Z,g,r){const k=i("v-toolbar-title"),b=i("v-divider"),C=i("v-spacer"),x=i("myCreate"),M=i("v-toolbar"),w=i("v-text-field"),_=i("v-btn"),c=i("v-icon"),m=i("v-tooltip"),P=i("v-data-table"),S=i("clientEdit"),R=i("myPayment"),A=i("myStatus"),D=i("myAssign"),O=i("MainLayout");return h(),p(O,{title:"Sale Management",rail:!1},{default:e(()=>[d("div",W,[t(P,{headers:s.headers,items:s.data.data,"sort-by":[{key:"name",order:"asc"}],class:"elevation-2",search:g.search,loading:g.loading},{top:e(()=>[t(M,{flat:""},{default:e(()=>[t(k,null,{default:e(()=>[l(y(s.title)+" Management",1)]),_:1}),t(b,{class:"mx-4",inset:"",vertical:""}),t(C),t(x,{form_data:s.form_data,title:s.title,modelRoute:s.modelRoute,receiver_data:s.receiver_data,sender_data:s.sender_data},null,8,["form_data","title","modelRoute","receiver_data","sender_data"])]),_:1}),t(w,{modelValue:g.search,"onUpdate:modelValue":f[0]||(f[0]=a=>g.search=a),"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},null,8,["modelValue"])]),"item.delivery_status":e(({item:a})=>[t(_,{"prepend-icon":r.getIcon(a.delivery_status),variant:"tonal",onClick:n=>r.statusUpdate(a),color:r.getColor(a.delivery_status)},{default:e(()=>[l(y(a.delivery_status),1)]),_:2},1032,["prepend-icon","onClick","color"])]),"item.actions":e(({item:a})=>[d("div",q,[t(m,{location:"bottom"},{activator:e(({props:n})=>[t(_,u({icon:""},n,{onClick:v=>r.openEdit(a)}),{default:e(()=>[t(c,{color:"blue"},{default:e(()=>[l(" mdi-pencil ")]),_:1})]),_:2},1040,["onClick"])]),default:e(()=>[F]),_:2},1024),t(m,{location:"bottom"},{activator:e(({props:n})=>[t(_,u({icon:""},n,{onClick:v=>o.deleteItem(a)}),{default:e(()=>[t(c,{color:"red"},{default:e(()=>[l(" mdi-delete ")]),_:1})]),_:2},1040,["onClick"])]),default:e(()=>[G]),_:2},1024),t(m,{location:"bottom"},{activator:e(({props:n})=>[t(_,u({icon:""},n,{href:"/invoice/"+a.id,target:"_blank"}),{default:e(()=>[t(c,null,{default:e(()=>[l(" mdi-printer ")]),_:1})]),_:2},1040,["href"])]),default:e(()=>[H]),_:2},1024),a.paid?B("",!0):(h(),p(m,{key:0,location:"bottom"},{activator:e(({props:n})=>[t(_,u({icon:""},n,{onClick:v=>r.openPayment(a)}),{default:e(()=>[t(c,{color:"info-lighten-1"},{default:e(()=>[l(" mdi-cash-check ")]),_:1})]),_:2},1040,["onClick"])]),default:e(()=>[J]),_:2},1024)),t(m,{location:"bottom"},{activator:e(({props:n})=>[t(_,u({icon:""},n,{onClick:v=>r.assignUpdate(a)}),{default:e(()=>[t(c,{color:"info-lighten-1"},{default:e(()=>[l(" mdi-bike-fast ")]),_:1})]),_:2},1040,["onClick"])]),default:e(()=>[K]),_:2},1024),t(m,{location:"bottom"},{activator:e(({props:n})=>[t(_,u({icon:""},n,{onClick:v=>r.goTo(`maps/${a.id}`)}),{default:e(()=>[t(c,{color:"warning"},{default:e(()=>[l(" mdi-map-marker ")]),_:1})]),_:2},1040,["onClick"])]),default:e(()=>[Q]),_:2},1024),t(m,{location:"bottom"},{activator:e(({props:n})=>[t(_,u({icon:""},n,{onClick:v=>r.autoAssign(a.id)}),{default:e(()=>[t(c,{color:"success-lighten-1"},{default:e(()=>[l(" mdi-map-marker-check ")]),_:1})]),_:2},1040,["onClick"])]),default:e(()=>[X]),_:2},1024)])]),"item.paid":e(({value:a})=>[a?(h(),p(c,{key:0,color:"success",size:"x-small"},{default:e(()=>[l("mdi-circle")]),_:1})):(h(),p(c,{key:1,color:"red",size:"x-small"},{default:e(()=>[l("mdi-circle")]),_:1}))]),"item.door_delivery":e(({value:a})=>[a?(h(),p(c,{key:0,color:"success",size:"x-small"},{default:e(()=>[l("mdi-circle")]),_:1})):(h(),p(c,{key:1,color:"red",size:"x-small"},{default:e(()=>[l("mdi-circle")]),_:1}))]),"item.notes":e(({value:a})=>[t(m,{text:a,location:"top"},{activator:e(({props:n})=>[d("span",u(n,{id:"tooltip"}),y(a),17)]),_:2},1032,["text"])]),_:1},8,["headers","items","search","loading"])]),t(S,{ref:"createModal"},null,512),t(R,{ref:"paymentModal",form_data:s.payment_data,title:s.title,modelRoute:s.payment_route},null,8,["form_data","title","modelRoute"]),t(A,{ref:"statusModal"},null,512),t(D,{ref:"assignModal"},null,512)]),_:1})}const de=I(L,[["render",Y]]);export{de as default};
