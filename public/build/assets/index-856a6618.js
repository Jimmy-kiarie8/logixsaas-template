import{m as u}from"./mapbox-gl-b26c6dbe.js";/* empty css                  */import{_ as N}from"./MainLayout-73462f0f.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";import{k as n,o as y,c as A,w as t,b as e,h as d,t as c,f as B,i as I,F,a as o}from"./app-d02c39e6.js";const X={components:{MainLayout:N},name:"maps",props:{sale:Object},data(){return{tab:null,map:null,items:[{title:"Dashboard",disabled:!1,href:"/"},{title:"Orders",disabled:!1,href:"/sales"},{title:"Maps",disabled:!0,href:"Maps"}]}},mounted(){this.initializeMap()},methods:{initializeMap(){u.accessToken="pk.eyJ1IjoiamltbGFyYXZlbCIsImEiOiJjbDdydXA5djkwaXR2M3FwMmxwc2h3YjdqIn0.rgDAW_8AKT6dHtGHXX1DtQ",this.map=new u.Map({container:this.$refs.mapContainer,style:"mapbox://styles/mapbox/streets-v10",center:[36.81958413560417,-1.2918808498502665],zoom:5}),this.drawRoute()},drawRoute(){if(!this.map.isStyleLoaded()){this.map.on("load",()=>this.drawRoute());return}const _=[this.sale.sender.longitude,this.sale.sender.latitude],s=[this.sale.receiver.longitude,this.sale.receiver.latitude],a=`https://api.mapbox.com/directions/v5/mapbox/driving/${_.join(",")};${s.join(",")}?geometries=geojson&access_token=${u.accessToken}`;fetch(a).then(l=>l.json()).then(l=>{if(l.routes&&l.routes.length){const r=l.routes[0].geometry.coordinates,m={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:r}};this.map.getSource("route")?this.map.getSource("route").setData(m):this.map.addLayer({id:"route",type:"line",source:{type:"geojson",data:m},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#1E88E5","line-width":5,"line-opacity":.75}}),this.addReceiverMarker(s),this.addSenderBlinker(_),this.map.flyTo({center:[this.sale.sender.longitude,this.sale.sender.latitude],zoom:13,essential:!0})}}).catch(l=>{console.error(l)})},addReceiverMarker(){new u.Marker().setLngLat([this.sale.receiver.longitude,this.sale.receiver.latitude]).addTo(this.map)},addSenderBlinker(){const _=document.createElement("div");_.className="sender-blinker",new u.Marker(_).setLngLat([this.sale.sender.longitude,this.sale.sender.latitude]).addTo(this.map)}}},G={class:"d-flex"},O=o("strong",{class:"me-4"},"14:00",-1),U={class:"text-caption"},q={class:"d-flex"},H=o("strong",{class:"me-4"},"14:00",-1),J={class:"text-caption"},Y={ref:"mapContainer",class:"map-container"};function K(_,s,a,l,r,m){const w=n("v-breadcrumbs"),k=n("v-divider"),p=n("v-tab"),x=n("v-tabs"),f=n("v-timeline-item"),M=n("v-timeline"),j=n("v-window-item"),L=n("v-window"),h=n("v-card-text"),v=n("v-btn"),S=n("v-spacer"),D=n("v-card-actions"),b=n("v-card"),g=n("v-col"),E=n("v-row"),C=n("v-container"),R=n("v-main"),V=n("v-app"),T=n("MainLayout");return y(),A(T,{title:"Maps",rail:!0},{default:t(()=>[e(V,null,{default:t(()=>[e(R,null,{default:t(()=>[e(C,{fluid:""},{default:t(()=>[e(E,null,{default:t(()=>[e(g,{cols:"3"},{default:t(()=>[e(b,null,{default:t(()=>[e(w,{items:r.items},{title:t(({item:i})=>[d(c(i.title),1)]),_:1},8,["items"]),e(k),e(x,{modelValue:r.tab,"onUpdate:modelValue":s[0]||(s[0]=i=>r.tab=i)},{default:t(()=>[e(p,{value:"0"},{default:t(()=>[d(" UNASSIGNED")]),_:1}),e(p,{value:"1"},{default:t(()=>[d("ASSIGNED")]),_:1}),e(p,{value:"2"},{default:t(()=>[d("COMPLETED")]),_:1})]),_:1},8,["modelValue"]),e(h,null,{default:t(()=>[e(L,{modelValue:r.tab,"onUpdate:modelValue":s[1]||(s[1]=i=>r.tab=i)},{default:t(()=>[(y(),B(F,null,I(3,i=>e(j,{key:i,value:i},{default:t(()=>[e(M,{side:"end",align:"start"},{default:t(()=>[e(f,{"dot-color":"pink",size:"small"},{default:t(()=>[o("div",G,[O,o("div",null,[o("strong",null,c(a.sale.sender.name),1),o("div",U,[o("p",null,c(a.sale.sender.address),1),o("small",null,c(a.sale.sender.phone),1)])])])]),_:1}),e(f,{"dot-color":"success",size:"small"},{default:t(()=>[o("div",q,[H,o("div",null,[o("strong",null,c(a.sale.receiver.name),1),o("div",J,[o("p",null,c(a.sale.receiver.address),1),o("small",null,c(a.sale.receiver.phone),1)])])])]),_:1})]),_:1})]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(D,null,{default:t(()=>[e(v,{"prepend-icon":"mdi-pin",variant:"tonal",onClick:m.drawRoute},{default:t(()=>[d(" Route ")]),_:1},8,["onClick"]),e(v,{"prepend-icon":"mdi-send",variant:"tonal",onClick:s[2]||(s[2]=()=>{})},{default:t(()=>[d(" Assing ")]),_:1}),e(S),e(v,{"prepend-icon":"mdi-send",variant:"tonal",color:"red"},{default:t(()=>[d(" Delayed ")]),_:1})]),_:1})]),_:1})]),_:1}),e(g,{col:"9"},{default:t(()=>[e(b,null,{default:t(()=>[e(h,null,{default:t(()=>[o("div",Y,null,512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const ee=z(X,[["render",K]]);export{ee as default};
